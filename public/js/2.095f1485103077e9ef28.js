webpackJsonp([2],{CZJI:function(t,e,r){var n=r("VU/8")(r("eRqN"),r("iuQD"),!1,function(t){r("tcoC")},"data-v-d6420aa0",null);t.exports=n.exports},GAhV:function(t,e,r){var n=r("VU/8")(r("SfgA"),r("WOkw"),!1,null,null,null);t.exports=n.exports},M8Ok:function(t,e,r){var n=r("cVsz");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("64399dba",n,!0)},SfgA:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),s=r("yKuP"),o=r.n(s),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.default={middleware:"guest",metaInfo:function(){return{title:this.$t("register")}},data:function(){return{form:new o.a({name:"",last_name:"last",email:"",password:"",password_confirmation:""}),valid:!1,nameRules:[function(t){return!!t||"Введите значение"},function(t){return t.length>=2||"Name must be less than 2 characters"}],emailRules:[function(t){return!!t||"Введите значение"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Введите значение"}]}},methods:{register:function(){var t,e=(t=a.a.mark(function t(){var e,r,n,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.post("/api/register");case 2:return e=t.sent,r=e.data,t.next=6,this.form.post("/api/login");case 6:return n=t.sent,s=n.data.token,this.$store.dispatch("auth/saveToken",{token:s}),t.next=11,this.$store.dispatch("auth/updateUser",i({},r));case 11:this.$router.push({name:"home"});case 12:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,s){try{var o=e[a](s),i=o.value}catch(t){return void r(t)}if(!o.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})});return function(){return e.apply(this,arguments)}}()}}},WOkw:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{on:{submit:function(e){e.preventDefault(),t.register(e)},keydown:function(e){t.form.onKeydown(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("has-error",{attrs:{form:t.form,field:"name"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("name"),rules:t.nameRules,counter:70,"prepend-icon":"person",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"email"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("email"),rules:t.emailRules,counter:70,"prepend-icon":"email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"password"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("password"),rules:t.passwordRules,"prepend-icon":"vpn_key",type:"password",counter:160,required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"password_confirmation"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("confirm_password"),rules:t.passwordRules,"prepend-icon":"vpn_key",type:"password",counter:160,required:""},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),t._v(" "),r("v-btn",{attrs:{large:"",block:"",loading:t.form.busy,type:"submit"}},[t._v(t._s(t.$t("register")))])],1)},staticRenderFns:[]}},baBS:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("yKuP"),a=r.n(n),s=r("CZJI"),o=r.n(s),i=r("GAhV"),u=r.n(i);e.default={middleware:"guest",components:{"login-input":o.a,"register-input":u.a},metaInfo:function(){return{title:this.$t("login")}},data:function(){return{register:!1,signingin:!0,state:"signingin",switchText:!1,form:new a.a({email:"",password:""}),remember:!1}},computed:{authComponent:function(){return"signingin"===this.state?"login-input":"register-input"},title:function(){return"signingin"===this.state?this.$t("login"):this.$t("register")},message:function(){return"signingin"===this.state?this.$t("has_not_account"):this.$t("has_account")}},methods:{toggleAuth:function(){var t=this;this.switchText=!0,setTimeout(function(){t.state="signingin"===t.state?"registration":"signingin",setTimeout(function(){return t.switchText=!1},1e3)},500)}}}},cVsz:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,".auth[data-v-31051eaf]{position:relative;width:100%;max-width:900px;height:500px;margin:30px auto;overflow:hidden;border-radius:6px;-webkit-box-shadow:0 0 20px 2px rgba(0,0,0,.5);box-shadow:0 0 20px 2px rgba(0,0,0,.5);border:0 solid transparent;-webkit-transition:background-color 1s,height .5s;transition:background-color 1s,height .5s}.auth-form[data-v-31051eaf],.auth-switch[data-v-31051eaf]{position:absolute;width:50%;height:100%;-webkit-transition:1s cubic-bezier(.68,-.55,.27,1.55);transition:1s cubic-bezier(.68,-.55,.27,1.55)}.signingin .auth-switch[data-v-31051eaf]{left:0}.signingin .auth-form[data-v-31051eaf]{left:50%}.auth-switch[data-v-31051eaf]{left:50%;padding-top:120px;text-align:center}.auth-switch__text[data-v-31051eaf]{-webkit-transition:-webkit-transform .35s;transition:-webkit-transform .35s;transition:transform .35s;transition:transform .35s,-webkit-transform .35s}h2[data-v-31051eaf]{text-align:center}.icon[data-v-31051eaf]{font-size:42px;color:#8e8e8e}form[data-v-31051eaf]{-webkit-transition:opacity .35s;transition:opacity .35s}.AuthEnter[data-v-31051eaf]{opacity:1}.AuthLeave[data-v-31051eaf]{opacity:0}.auth-form[data-v-31051eaf]{left:0;z-index:2;text-align:center;-webkit-transition-property:left,background-color;transition-property:left,background-color;-webkit-box-shadow:0 0 15px #000;box-shadow:0 0 15px #000}.card[data-v-31051eaf]{padding:50px 30px}.fadeOut[data-v-31051eaf]{-webkit-transform:scale(0);transform:scale(0)}.fadeIn[data-v-31051eaf]{-webkit-transform:scale(1);transform:scale(1)}",""])},eRqN:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),s=r("yKuP"),o=r.n(s),i=r("NYxO"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.default={middleware:"guest",metaInfo:function(){return{title:this.$t("login")}},data:function(){return{form:new o.a({email:"",password:""}),valid:!1,emailRules:[function(t){return!!t||"Введите значение"}],passwordRules:[function(t){return!!t||"Введите значение"}],remember:!1}},methods:u({login:function(){var t,e=(t=a.a.mark(function t(){var e,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.post("/api/login");case 2:return e=t.sent,r=e.data,this.$store.dispatch("auth/saveToken",{token:r.token,remember:this.remember}),t.next=7,this.$store.dispatch("auth/fetchUser");case 7:console.log("logged"),this.loadContent(),this.$router.push({name:"home"});case 10:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,s){try{var o=e[a](s),i=o.value}catch(t){return void r(t)}if(!o.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})});return function(){return e.apply(this,arguments)}}()},Object(i.mapActions)({employees:"employees/load",departments:"departments/load",positions:"positions/load"}),{loadContent:function(){this.employees(),this.departments(),this.positions()}})}},iiIO:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},iuQD:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{on:{submit:function(e){e.preventDefault(),t.login(e)},keydown:function(e){t.form.onKeydown(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("has-error",{attrs:{form:t.form,field:"email"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("email"),rules:t.emailRules,"prepend-icon":"email",type:"email",required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"password"}}),t._v(" "),r("v-text-field",{attrs:{label:t.$t("password"),rules:t.passwordRules,"prepend-icon":"vpn_key",type:"password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),r("v-checkbox",{attrs:{label:t.$t("remember_me"),name:"remember"},model:{value:t.remember,callback:function(e){t.remember=e},expression:"remember"}}),t._v(" "),r("v-btn",{attrs:{block:"",large:"",type:"submit",loading:t.form.busy}},[t._v("\n       "+t._s(t.$t("login"))+"\n  ")]),t._v(" "),r("v-btn",{attrs:{flat:"",small:"",to:{name:"password.request"}}},[t._v("\n    "+t._s(t.$t("forgot_password"))+"\n  ")])],1)},staticRenderFns:[]}},rJIo:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"auth-wrapper",class:t.state},[r("div",{staticClass:"auth"},[r("div",{staticClass:"auth-switch"},[r("div",{staticClass:"auth-switch__text",class:{fadeIn:!t.switchText,fadeOut:t.switchText}},[r("h2",[t._v(" "+t._s(t.title)+" ")]),t._v(" "),r("v-btn",{on:{click:function(e){e.preventDefault(),t.toggleAuth(e)}}},[t._v(t._s(t.message))])],1)]),t._v(" "),r("div",{staticClass:"auth-form"},[r("v-card",{attrs:{height:"500"}},[r("transition",{attrs:{"enter-active-class":"AuthEnter","leave-active-class":"AuthLeave",mode:"out-in"}},[r(t.authComponent,{tag:"component"})],1)],1)],1)])])},staticRenderFns:[]}},tcoC:function(t,e,r){var n=r("iiIO");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("4b958c08",n,!0)},yNuM:function(t,e,r){var n=r("VU/8")(r("baBS"),r("rJIo"),!1,function(t){r("M8Ok")},"data-v-31051eaf",null);t.exports=n.exports}});
//# sourceMappingURL=2.095f1485103077e9ef28.js.map