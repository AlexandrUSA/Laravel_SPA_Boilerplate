{"version":3,"file":"js/5.c35f546cf1af3f2c937e.js","sources":["webpack:///js/5.c35f546cf1af3f2c937e.js"],"sourcesContent":["webpackJsonp([5],{\"/io7\":function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var a=i(\"NYxO\"),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t};e.default={middleware:\"auth\",data:function(){return{dialog:!1,deleteAlert:!1,deleteDenied:!1,headers:[{text:\"Номер\",align:\"right\",sortable:!1,value:\"id\"},{text:\"Наименование\",align:\"right\",value:\"title\"},{text:\"Подразделение\",align:\"right\",value:\"department\"},{text:\"Сотрудников\",align:\"right\",value:\"employees\"},{text:\"Действия\",align:\"right\",value:\"title\",sortable:!1}],editedIndex:-1,editedItem:{id:\"\",title:\"\",department_id:\"\"},defaultItem:{id:\"\",title:\"\",department_id:\"\"}}},computed:s({},Object(a.mapGetters)({items:\"positions/positions\",departments:\"departments/departments\",employees:\"employees/employees\"}),{deleteMsg:function(){return this.deleteDenied?\" За данной должностью закреплены сотрудники. Пожалуйста, распределите их на другие должности прежде чем удалять текущую.\":\" Вы действительно хотите удалить данную должность?\"},formTitle:function(){return-1===this.editedIndex?\"Новая должность\":\"Изменить должность\"}}),watch:{dialog:function(t){t||this.close()}},methods:s({},Object(a.mapActions)({add:\"positions/add\",update:\"positions/edit\",remove:\"positions/remove\"}),{getDepartmentName:function(t){return this.departments.find(function(e){return e.id==t}).title},getPositionEmployees:function(t){return this.employees.filter(function(e){return e.position_id==t})},editItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.deleteAlert=!0,this.getPositionEmployees(t.id).length?this.deleteDenied=!0:(this.deleteDenied=!1,this.editedIndex=t.id)},deleteConfirm:function(){this.remove(this.editedIndex),this.deleteAlert=!1,this.editedIndex=-1},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){this.editedIndex>-1?this.update(this.editedItem):this.add(this.editedItem),this.close()}})}},\"9D4g\":function(t,e,i){var a=i(\"VU/8\")(i(\"/io7\"),i(\"WhbS\"),!1,function(t){i(\"YgqC\")},\"data-v-440c0b96\",null);t.exports=a.exports},WhbS:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"positions\"}},[i(\"v-dialog\",{attrs:{\"max-width\":\"800px\"},model:{value:t.deleteAlert,callback:function(e){t.deleteAlert=e},expression:\"deleteAlert\"}},[i(\"v-btn\",{staticClass:\"mb-2\",attrs:{slot:\"activator\",color:\"primary\",dark:\"\"},slot:\"activator\"},[t._v(\"Добавить должность\")]),t._v(\" \"),i(\"v-card\",[i(\"v-card-title\",[i(\"span\",{staticClass:\"headline\"},[t._v(\"Внимание!\")])]),t._v(\" \"),i(\"v-card-text\",[t._v(\"\\n        \"+t._s(t.deleteMsg)+\"\\n      \")]),t._v(\" \"),i(\"v-card-actions\",[i(\"v-spacer\"),t._v(\" \"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",flat:\"\"},nativeOn:{click:function(e){t.deleteAlert=!t.deleteAlert}}},[t._v(\"Отмена\")]),t._v(\" \"),i(\"v-btn\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.deleteDenied,expression:\"!deleteDenied\"}],attrs:{color:\"blue darken-1\",flat:\"\"},nativeOn:{click:function(e){t.deleteConfirm(e)}}},[t._v(\"Удалить\")])],1)],1)],1),t._v(\" \"),i(\"v-dialog\",{attrs:{\"max-width\":\"500px\"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:\"dialog\"}},[i(\"v-btn\",{staticClass:\"mb-2\",attrs:{slot:\"activator\",color:\"primary\",dark:\"\"},slot:\"activator\"},[t._v(\"Добавить должность\")]),t._v(\" \"),i(\"v-card\",[i(\"v-card-title\",[i(\"span\",{staticClass:\"headline\"},[t._v(t._s(t.formTitle))])]),t._v(\" \"),i(\"v-card-text\",[i(\"v-container\",{attrs:{\"grid-list-md\":\"\"}},[i(\"v-layout\",{attrs:{wrap:\"\"}},[i(\"v-flex\",{attrs:{xs12:\"\",sm6:\"\"}},[i(\"v-text-field\",{attrs:{label:\"Наименование\"},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,\"title\",e)},expression:\"editedItem.title\"}})],1),t._v(\" \"),i(\"v-flex\",{attrs:{xs12:\"\",sm6:\"\"}},[i(\"v-select\",{attrs:{label:t.$t(\"department\"),\"prepend-icon\":\"card_travel\",items:t.departments,\"item-text\":\"title\",\"item-value\":\"id\",rules:[function(t){return!!t||\"Выберите подразделение\"}],required:\"\"},model:{value:t.editedItem.department_id,callback:function(e){t.$set(t.editedItem,\"department_id\",e)},expression:\"editedItem.department_id\"}})],1)],1)],1)],1),t._v(\" \"),i(\"v-card-actions\",[i(\"v-spacer\"),t._v(\" \"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",flat:\"\"},nativeOn:{click:function(e){t.close(e)}}},[t._v(\"Cancel\")]),t._v(\" \"),i(\"v-btn\",{attrs:{color:\"blue darken-1\",flat:\"\"},nativeOn:{click:function(e){t.save(e)}}},[t._v(\"Save\")])],1)],1)],1),t._v(\" \"),i(\"v-data-table\",{staticClass:\"elevation-1\",attrs:{headers:t.headers,items:t.items,\"hide-actions\":\"\"},scopedSlots:t._u([{key:\"items\",fn:function(e){return[i(\"td\",{staticClass:\"text-xs-right\"},[t._v(t._s(e.item.id))]),t._v(\" \"),i(\"td\",{staticClass:\"text-xs-right\"},[t._v(t._s(e.item.title))]),t._v(\" \"),i(\"td\",{staticClass:\"text-xs-right\"},[t._v(t._s(t.getDepartmentName(e.item.department_id)))]),t._v(\" \"),i(\"td\",{staticClass:\"text-xs-right\"},[t._v(t._s(t.getPositionEmployees(e.item.id).length))]),t._v(\" \"),i(\"td\",{staticClass:\"text-xs-right\"},[i(\"v-btn\",{staticClass:\"mx-0\",attrs:{icon:\"\"},on:{click:function(i){t.editItem(e.item)}}},[i(\"v-icon\",{attrs:{color:\"teal\"}},[t._v(\"edit\")])],1),t._v(\" \"),i(\"v-btn\",{staticClass:\"mx-0\",attrs:{icon:\"\"},on:{click:function(i){t.deleteItem(e.item)}}},[i(\"v-icon\",{attrs:{color:\"pink\"}},[t._v(\"delete\")])],1)],1)]}}])},[i(\"template\",{slot:\"no-data\"},[i(\"v-btn\",{attrs:{color:\"primary\"},on:{click:function(t){}}},[t._v(\"Обновить\")])],1)],2)],1)},staticRenderFns:[]}},YgqC:function(t,e,i){var a=i(\"vKhY\");\"string\"==typeof a&&(a=[[t.i,a,\"\"]]),a.locals&&(t.exports=a.locals);i(\"rjj0\")(\"6fd34e38\",a,!0)},vKhY:function(t,e,i){(t.exports=i(\"FZ+f\")(!1)).push([t.i,\"#positions[data-v-440c0b96]{position:relative;max-width:90%;margin:10px auto}.mb-2.btn[data-v-440c0b96]{position:absolute;bottom:-50px}\",\"\"])}});\n\n\n// WEBPACK FOOTER //\n// js/5.c35f546cf1af3f2c937e.js"],"mappings":"AAAA","sourceRoot":""}